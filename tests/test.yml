---
- hosts: localhost

  vars: 
    do_apiv2_url: https://api.digitalocean.com/v2/droplets
  vars_files:
    - do_secrets.yml
  tasks:
    - debug:
        msg: im alive

    - uri:
        url: "{{ do_apiv2_url }}"
        HEADER_Authorization: Bearer {{ do_api_token }}
        method: GET 
        timeout: 30 
        status_code: 200 # not required. A list of valid, numeric, HTTP status codes that signifies success of the request.
        validate_certs: yes # not required. If C(no), SSL certificates will not be validated.  This should only set to C(no) used on personally controlled sites using self-signed certificates.  Prior to 1.9.2 the code defaulted to C(no).
      register: return_do

    - debug:
        var: return_do.json.droplets # not required. A variable name to debug.  Mutually exclusive with the 'msg' option.
#   roles:
#     - get_do_inventory
